design_real_data_fetcher:
  description: >
    Design a robust "DataFetcher" component for the SentimentWorker to retrieve real-time social media and market data.

    1. **Data Sources**:
       - Identify and prioritize data sources (e.g., Twitter/X API, Brave Search API, specific crypto forums/APIs like CoinGecko).
       - Outline how to fetch data relevant to the `keywords` defined in the SentimentWorker configuration.

    2. **Fetching Strategy**:
       - Implement a polling mechanism (e.g., every 5 minutes, configurable).
       - Implement adaptive polling (increase frequency on volatility, decrease during off-peak hours).
       - Develop request throttling using a `RequestThrottler` class with max requests and time window.
       - Implement robust error handling for API failures, rate limits, and data format issues (using retry mechanism).
       - Consider caching strategies (short-term and long-term TTLs).

    3. **Output Interface**:
       - Define the standardized JSON format for fetched data, including:
         - `source`: (e.g., "twitter", "brave_search", "coingecko")
         - `data_type`: (e.g., "tweet", "search_result", "market_data")
         - `timestamp`: ISO8601 format.
         - `content`: Raw data payload.
         - `metadata`: Extracted keywords, language, sentiment_score (initially null).
       - Ensure output is easily processable by SentimentWorker components.

    4. **Tool Integration**:
       - Plan integration with existing tools like `web_search` for fallback.
       - Propose new tools if necessary (e.g., `api_proxy`, `data_normalizer`, `trend_detector`).

  expected_output: >
    A Technical Specification for the Real DataFetcher (Markdown), detailing data sources, fetching strategy, error handling, output format, and tool integration plan.
  agent: technical_architect
